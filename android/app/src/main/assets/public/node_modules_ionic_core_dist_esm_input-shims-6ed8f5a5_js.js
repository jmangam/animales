"use strict";
(self["webpackChunkapp"] = self["webpackChunkapp"] || []).push([["node_modules_ionic_core_dist_esm_input-shims-6ed8f5a5_js"],{

/***/ 4508:
/*!*******************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/input-shims-6ed8f5a5.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "startInputShims": () => (/* binding */ startInputShims)
/* harmony export */ });
/* harmony import */ var C_Users_2DAW_Documents_ionic_animales_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 1670);
/* harmony import */ var _index_5d0c8232_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-5d0c8232.js */ 3081);
/* harmony import */ var _helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers-3b390e48.js */ 9234);
/* harmony import */ var _index_c4b11676_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index-c4b11676.js */ 9273);


/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */



const cloneMap = new WeakMap();

const relocateInput = (componentEl, inputEl, shouldRelocate, inputRelativeY = 0) => {
  if (cloneMap.has(componentEl) === shouldRelocate) {
    return;
  }

  if (shouldRelocate) {
    addClone(componentEl, inputEl, inputRelativeY);
  } else {
    removeClone(componentEl, inputEl);
  }
};

const isFocused = input => {
  return input === input.getRootNode().activeElement;
};

const addClone = (componentEl, inputEl, inputRelativeY) => {
  // this allows for the actual input to receive the focus from
  // the user's touch event, but before it receives focus, it
  // moves the actual input to a location that will not screw
  // up the app's layout, and does not allow the native browser
  // to attempt to scroll the input into place (messing up headers/footers)
  // the cloned input fills the area of where native input should be
  // while the native input fakes out the browser by relocating itself
  // before it receives the actual focus event
  // We hide the focused input (with the visible caret) invisible by making it scale(0),
  const parentEl = inputEl.parentNode; // DOM WRITES

  const clonedEl = inputEl.cloneNode(false);
  clonedEl.classList.add('cloned-input');
  clonedEl.tabIndex = -1;
  parentEl.appendChild(clonedEl);
  cloneMap.set(componentEl, clonedEl);
  const doc = componentEl.ownerDocument;
  const tx = doc.dir === 'rtl' ? 9999 : -9999;
  componentEl.style.pointerEvents = 'none';
  inputEl.style.transform = `translate3d(${tx}px,${inputRelativeY}px,0) scale(0)`;
};

const removeClone = (componentEl, inputEl) => {
  const clone = cloneMap.get(componentEl);

  if (clone) {
    cloneMap.delete(componentEl);
    clone.remove();
  }

  componentEl.style.pointerEvents = '';
  inputEl.style.transform = '';
};

const enableHideCaretOnScroll = (componentEl, inputEl, scrollEl) => {
  if (!scrollEl || !inputEl) {
    return () => {
      return;
    };
  }

  const scrollHideCaret = shouldHideCaret => {
    if (isFocused(inputEl)) {
      relocateInput(componentEl, inputEl, shouldHideCaret);
    }
  };

  const onBlur = () => relocateInput(componentEl, inputEl, false);

  const hideCaret = () => scrollHideCaret(true);

  const showCaret = () => scrollHideCaret(false);

  (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.a)(scrollEl, 'ionScrollStart', hideCaret);
  (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.a)(scrollEl, 'ionScrollEnd', showCaret);
  inputEl.addEventListener('blur', onBlur);
  return () => {
    (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.b)(scrollEl, 'ionScrollStart', hideCaret);
    (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.b)(scrollEl, 'ionScrollEnd', showCaret);
    inputEl.addEventListener('ionBlur', onBlur);
  };
};

const SKIP_SELECTOR = 'input, textarea, [no-blur], [contenteditable]';

const enableInputBlurring = () => {
  let focused = true;
  let didScroll = false;
  const doc = document;

  const onScroll = () => {
    didScroll = true;
  };

  const onFocusin = () => {
    focused = true;
  };

  const onTouchend = ev => {
    // if app did scroll return early
    if (didScroll) {
      didScroll = false;
      return;
    }

    const active = doc.activeElement;

    if (!active) {
      return;
    } // only blur if the active element is a text-input or a textarea


    if (active.matches(SKIP_SELECTOR)) {
      return;
    } // if the selected target is the active element, do not blur


    const tapped = ev.target;

    if (tapped === active) {
      return;
    }

    if (tapped.matches(SKIP_SELECTOR) || tapped.closest(SKIP_SELECTOR)) {
      return;
    }

    focused = false; // TODO: find a better way, why 50ms?

    setTimeout(() => {
      if (!focused) {
        active.blur();
      }
    }, 50);
  };

  (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.a)(doc, 'ionScrollStart', onScroll);
  doc.addEventListener('focusin', onFocusin, true);
  doc.addEventListener('touchend', onTouchend, false);
  return () => {
    (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.b)(doc, 'ionScrollStart', onScroll, true);
    doc.removeEventListener('focusin', onFocusin, true);
    doc.removeEventListener('touchend', onTouchend, false);
  };
};

const SCROLL_ASSIST_SPEED = 0.3;

const getScrollData = (componentEl, contentEl, keyboardHeight) => {
  var _a;

  const itemEl = (_a = componentEl.closest('ion-item,[ion-item]')) !== null && _a !== void 0 ? _a : componentEl;
  return calcScrollData(itemEl.getBoundingClientRect(), contentEl.getBoundingClientRect(), keyboardHeight, componentEl.ownerDocument.defaultView.innerHeight);
};

const calcScrollData = (inputRect, contentRect, keyboardHeight, platformHeight) => {
  // compute input's Y values relative to the body
  const inputTop = inputRect.top;
  const inputBottom = inputRect.bottom; // compute visible area

  const visibleAreaTop = contentRect.top;
  const visibleAreaBottom = Math.min(contentRect.bottom, platformHeight - keyboardHeight); // compute safe area

  const safeAreaTop = visibleAreaTop + 15;
  const safeAreaBottom = visibleAreaBottom * 0.75; // figure out if each edge of the input is within the safe area

  const distanceToBottom = safeAreaBottom - inputBottom;
  const distanceToTop = safeAreaTop - inputTop; // desiredScrollAmount is the negated distance to the safe area according to our calculations.

  const desiredScrollAmount = Math.round(distanceToBottom < 0 ? -distanceToBottom : distanceToTop > 0 ? -distanceToTop : 0); // our calculations make some assumptions that aren't always true, like the keyboard being closed when an input
  // gets focus, so make sure we don't scroll the input above the visible area

  const scrollAmount = Math.min(desiredScrollAmount, inputTop - visibleAreaTop);
  const distance = Math.abs(scrollAmount);
  const duration = distance / SCROLL_ASSIST_SPEED;
  const scrollDuration = Math.min(400, Math.max(150, duration));
  return {
    scrollAmount,
    scrollDuration,
    scrollPadding: keyboardHeight,
    inputSafeY: -(inputTop - safeAreaTop) + 4
  };
};

const enableScrollAssist = (componentEl, inputEl, contentEl, footerEl, keyboardHeight) => {
  let coord;

  const touchStart = ev => {
    coord = (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.p)(ev);
  };

  const touchEnd = ev => {
    // input cover touchend/mouseup
    if (!coord) {
      return;
    } // get where the touchend/mouseup ended


    const endCoord = (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.p)(ev); // focus this input if the pointer hasn't moved XX pixels
    // and the input doesn't already have focus

    if (!hasPointerMoved(6, coord, endCoord) && !isFocused(inputEl)) {
      // begin the input focus process
      jsSetFocus(componentEl, inputEl, contentEl, footerEl, keyboardHeight);
    }
  };

  componentEl.addEventListener('touchstart', touchStart, {
    capture: true,
    passive: true
  });
  componentEl.addEventListener('touchend', touchEnd, true);
  return () => {
    componentEl.removeEventListener('touchstart', touchStart, true);
    componentEl.removeEventListener('touchend', touchEnd, true);
  };
};

const jsSetFocus = /*#__PURE__*/function () {
  var _ref = (0,C_Users_2DAW_Documents_ionic_animales_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (componentEl, inputEl, contentEl, footerEl, keyboardHeight) {
    if (!contentEl && !footerEl) {
      return;
    }

    const scrollData = getScrollData(componentEl, contentEl || footerEl, keyboardHeight);

    if (contentEl && Math.abs(scrollData.scrollAmount) < 4) {
      // the text input is in a safe position that doesn't
      // require it to be scrolled into view, just set focus now
      inputEl.focus();
      return;
    } // temporarily move the focus to the focus holder so the browser
    // doesn't freak out while it's trying to get the input in place
    // at this point the native text input still does not have focus


    relocateInput(componentEl, inputEl, true, scrollData.inputSafeY);
    inputEl.focus();
    /**
     * Relocating/Focusing input causes the
     * click event to be cancelled, so
     * manually fire one here.
     */

    (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.r)(() => componentEl.click());

    if (typeof window !== 'undefined') {
      let scrollContentTimeout;

      const scrollContent = /*#__PURE__*/function () {
        var _ref2 = (0,C_Users_2DAW_Documents_ionic_animales_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
          // clean up listeners and timeouts
          if (scrollContentTimeout !== undefined) {
            clearTimeout(scrollContentTimeout);
          }

          window.removeEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
          window.removeEventListener('ionKeyboardDidShow', scrollContent); // scroll the input into place

          if (contentEl) {
            yield (0,_index_5d0c8232_js__WEBPACK_IMPORTED_MODULE_1__.c)(contentEl, 0, scrollData.scrollAmount, scrollData.scrollDuration);
          } // the scroll view is in the correct position now
          // give the native text input focus


          relocateInput(componentEl, inputEl, false, scrollData.inputSafeY); // ensure this is the focused input

          inputEl.focus();
        });

        return function scrollContent() {
          return _ref2.apply(this, arguments);
        };
      }();

      const doubleKeyboardEventListener = () => {
        window.removeEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
        window.addEventListener('ionKeyboardDidShow', scrollContent);
      };

      if (contentEl) {
        const scrollEl = yield (0,_index_5d0c8232_js__WEBPACK_IMPORTED_MODULE_1__.g)(contentEl);
        /**
         * scrollData will only consider the amount we need
         * to scroll in order to properly bring the input
         * into view. It will not consider the amount
         * we can scroll in the content element.
         * As a result, scrollData may request a greater
         * scroll position than is currently available
         * in the DOM. If this is the case, we need to
         * wait for the webview to resize/the keyboard
         * to show in order for additional scroll
         * bandwidth to become available.
         */

        const totalScrollAmount = scrollEl.scrollHeight - scrollEl.clientHeight;

        if (scrollData.scrollAmount > totalScrollAmount - scrollEl.scrollTop) {
          /**
           * On iOS devices, the system will show a "Passwords" bar above the keyboard
           * after the initial keyboard is shown. This prevents the webview from resizing
           * until the "Passwords" bar is shown, so we need to wait for that to happen first.
           */
          if (inputEl.type === 'password') {
            // Add 50px to account for the "Passwords" bar
            scrollData.scrollAmount += 50;
            window.addEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
          } else {
            window.addEventListener('ionKeyboardDidShow', scrollContent);
          }
          /**
           * This should only fire in 2 instances:
           * 1. The app is very slow.
           * 2. The app is running in a browser on an old OS
           * that does not support Ionic Keyboard Events
           */


          scrollContentTimeout = setTimeout(scrollContent, 1000);
          return;
        }
      }

      scrollContent();
    }
  });

  return function jsSetFocus(_x, _x2, _x3, _x4, _x5) {
    return _ref.apply(this, arguments);
  };
}();

const hasPointerMoved = (threshold, startCoord, endCoord) => {
  if (startCoord && endCoord) {
    const deltaX = startCoord.x - endCoord.x;
    const deltaY = startCoord.y - endCoord.y;
    const distance = deltaX * deltaX + deltaY * deltaY;
    return distance > threshold * threshold;
  }

  return false;
};

const PADDING_TIMER_KEY = '$ionPaddingTimer';

const enableScrollPadding = keyboardHeight => {
  const doc = document;

  const onFocusin = ev => {
    setScrollPadding(ev.target, keyboardHeight);
  };

  const onFocusout = ev => {
    setScrollPadding(ev.target, 0);
  };

  doc.addEventListener('focusin', onFocusin);
  doc.addEventListener('focusout', onFocusout);
  return () => {
    doc.removeEventListener('focusin', onFocusin);
    doc.removeEventListener('focusout', onFocusout);
  };
};

const setScrollPadding = (input, keyboardHeight) => {
  var _a, _b;

  if (input.tagName !== 'INPUT') {
    return;
  }

  if (input.parentElement && input.parentElement.tagName === 'ION-INPUT') {
    return;
  }

  if (((_b = (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.tagName) === 'ION-SEARCHBAR') {
    return;
  }

  const el = (0,_index_5d0c8232_js__WEBPACK_IMPORTED_MODULE_1__.f)(input);

  if (el === null) {
    return;
  }

  const timer = el[PADDING_TIMER_KEY];

  if (timer) {
    clearTimeout(timer);
  }

  if (keyboardHeight > 0) {
    el.style.setProperty('--keyboard-offset', `${keyboardHeight}px`);
  } else {
    el[PADDING_TIMER_KEY] = setTimeout(() => {
      el.style.setProperty('--keyboard-offset', '0px');
    }, 120);
  }
};

const INPUT_BLURRING = true;
const SCROLL_PADDING = true;

const startInputShims = config => {
  const doc = document;
  const keyboardHeight = config.getNumber('keyboardHeight', 290);
  const scrollAssist = config.getBoolean('scrollAssist', true);
  const hideCaret = config.getBoolean('hideCaretOnScroll', true);
  const inputBlurring = config.getBoolean('inputBlurring', true);
  const scrollPadding = config.getBoolean('scrollPadding', true);
  const inputs = Array.from(doc.querySelectorAll('ion-input, ion-textarea'));
  const hideCaretMap = new WeakMap();
  const scrollAssistMap = new WeakMap();

  const registerInput = /*#__PURE__*/function () {
    var _ref3 = (0,C_Users_2DAW_Documents_ionic_animales_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (componentEl) {
      yield new Promise(resolve => (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.c)(componentEl, resolve));
      const inputRoot = componentEl.shadowRoot || componentEl;
      const inputEl = inputRoot.querySelector('input') || inputRoot.querySelector('textarea');
      const scrollEl = (0,_index_5d0c8232_js__WEBPACK_IMPORTED_MODULE_1__.f)(componentEl);
      const footerEl = !scrollEl ? componentEl.closest('ion-footer') : null;

      if (!inputEl) {
        return;
      }

      if (!!scrollEl && hideCaret && !hideCaretMap.has(componentEl)) {
        const rmFn = enableHideCaretOnScroll(componentEl, inputEl, scrollEl);
        hideCaretMap.set(componentEl, rmFn);
      }
      /**
       * date/datetime-locale inputs on mobile devices show date picker
       * overlays instead of keyboards. As a result, scroll assist is
       * not needed. This also works around a bug in iOS <16 where
       * scroll assist causes the browser to lock up. See FW-1997.
       */


      const isDateInput = inputEl.type === 'date' || inputEl.type === 'datetime-local';

      if (!isDateInput && (!!scrollEl || !!footerEl) && scrollAssist && !scrollAssistMap.has(componentEl)) {
        const rmFn = enableScrollAssist(componentEl, inputEl, scrollEl, footerEl, keyboardHeight);
        scrollAssistMap.set(componentEl, rmFn);
      }
    });

    return function registerInput(_x6) {
      return _ref3.apply(this, arguments);
    };
  }();

  const unregisterInput = componentEl => {
    if (hideCaret) {
      const fn = hideCaretMap.get(componentEl);

      if (fn) {
        fn();
      }

      hideCaretMap.delete(componentEl);
    }

    if (scrollAssist) {
      const fn = scrollAssistMap.get(componentEl);

      if (fn) {
        fn();
      }

      scrollAssistMap.delete(componentEl);
    }
  };

  if (inputBlurring && INPUT_BLURRING) {
    enableInputBlurring();
  }

  if (scrollPadding && SCROLL_PADDING) {
    enableScrollPadding(keyboardHeight);
  } // Input might be already loaded in the DOM before ion-device-hacks did.
  // At this point we need to look for all of the inputs not registered yet
  // and register them.


  for (const input of inputs) {
    registerInput(input);
  }

  doc.addEventListener('ionInputDidLoad', ev => {
    registerInput(ev.detail);
  });
  doc.addEventListener('ionInputDidUnload', ev => {
    unregisterInput(ev.detail);
  });
};



/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW5wdXQtc2hpbXMtNmVkOGY1YTVfanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBLE1BQU1lLFFBQVEsR0FBRyxJQUFJQyxPQUFKLEVBQWpCOztBQUNBLE1BQU1DLGFBQWEsR0FBRyxDQUFDQyxXQUFELEVBQWNDLE9BQWQsRUFBdUJDLGNBQXZCLEVBQXVDQyxjQUFjLEdBQUcsQ0FBeEQsS0FBOEQ7RUFDbEYsSUFBSU4sUUFBUSxDQUFDTyxHQUFULENBQWFKLFdBQWIsTUFBOEJFLGNBQWxDLEVBQWtEO0lBQ2hEO0VBQ0Q7O0VBQ0QsSUFBSUEsY0FBSixFQUFvQjtJQUNsQkcsUUFBUSxDQUFDTCxXQUFELEVBQWNDLE9BQWQsRUFBdUJFLGNBQXZCLENBQVI7RUFDRCxDQUZELE1BR0s7SUFDSEcsV0FBVyxDQUFDTixXQUFELEVBQWNDLE9BQWQsQ0FBWDtFQUNEO0FBQ0YsQ0FWRDs7QUFXQSxNQUFNTSxTQUFTLEdBQUlDLEtBQUQsSUFBVztFQUMzQixPQUFPQSxLQUFLLEtBQUtBLEtBQUssQ0FBQ0MsV0FBTixHQUFvQkMsYUFBckM7QUFDRCxDQUZEOztBQUdBLE1BQU1MLFFBQVEsR0FBRyxDQUFDTCxXQUFELEVBQWNDLE9BQWQsRUFBdUJFLGNBQXZCLEtBQTBDO0VBQ3pEO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBLE1BQU1RLFFBQVEsR0FBR1YsT0FBTyxDQUFDVyxVQUF6QixDQVZ5RCxDQVd6RDs7RUFDQSxNQUFNQyxRQUFRLEdBQUdaLE9BQU8sQ0FBQ2EsU0FBUixDQUFrQixLQUFsQixDQUFqQjtFQUNBRCxRQUFRLENBQUNFLFNBQVQsQ0FBbUJDLEdBQW5CLENBQXVCLGNBQXZCO0VBQ0FILFFBQVEsQ0FBQ0ksUUFBVCxHQUFvQixDQUFDLENBQXJCO0VBQ0FOLFFBQVEsQ0FBQ08sV0FBVCxD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QUFDakgsR0FBYixDQUFpQjVCLFdBQWpCLENBQVg7O01BQ0EsSUFBSXdKLEVBQUosRUFBUTtRQUNOQSxFQUFFO01BQ0g7O01BQ0RYLFlBQVksQ0FBQ2hILE1BQWIsQ0FBb0I3QixXQUFwQjtJQUNEOztJQUNELElBQUlzSSxZQUFKLEVBQWtCO01BQ2hCLE1BQU1rQixFQUFFLEdBQUdWLGVBQWUsQ0FBQ2xILEdBQWhCLENBQW9CNUIsV0FBcEIsQ0FBWDs7TUFDQSxJQUFJd0osRUFBSixFQUFRO1FBQ05BLEVBQUU7TUFDSDs7TUFDRFYsZUFBZSxDQUFDakgsTUFBaEIsQ0FBdUI3QixXQUF2QjtJQUNEO0VBQ0YsQ0FmRDs7RUFnQkEsSUFBSXdJLGFBQWEsSUFBSVAsY0FBckIsRUFBcUM7SUFDbkMxRixtQkFBbUI7RUFDcEI7O0VBQ0QsSUFBSWdELGFBQWEsSUFBSTJDLGNBQXJCLEVBQXFDO0lBQ25DVixtQkFBbUIsQ0FBQy9ELGNBQUQsQ0FBbkI7RUFDRCxDQTNEaUMsQ0E0RGxDO0VBQ0E7RUFDQTs7O0VBQ0EsS0FBSyxNQUFNakQsS0FBWCxJQUFvQmlJLE1BQXBCLEVBQTRCO0lBQzFCTSxhQUFhLENBQUN2SSxLQUFELENBQWI7RUFDRDs7RUFDRFksR0FBRyxDQUFDL0IsZ0JBQUosQ0FBcUIsaUJBQXJCLEVBQTBDeUQsRUFBRCxJQUFRO0lBQy9DaUcsYUFBYSxDQUFDakcsRUFBRSxDQUFDMkcsTUFBSixDQUFiO0VBQ0QsQ0FGRDtFQUdBckksR0FBRyxDQUFDL0IsZ0JBQUosQ0FBcUIsbUJBQXJCLEVBQTRDeUQsRUFBRCxJQUFRO0lBQ2pEeUcsZUFBZSxDQUFDekcsRUFBRSxDQUFDMkcsTUFBSixDQUFmO0VBQ0QsQ0FGRDtBQUdELENBeEVEIiwic291cmNlcyI6WyIuL25vZGVfbW9kdWxlcy9AaW9uaWMvY29yZS9kaXN0L2VzbS9pbnB1dC1zaGltcy02ZWQ4ZjVhNS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgZyBhcyBnZXRTY3JvbGxFbGVtZW50LCBjIGFzIHNjcm9sbEJ5UG9pbnQsIGYgYXMgZmluZENsb3Nlc3RJb25Db250ZW50IH0gZnJvbSAnLi9pbmRleC01ZDBjODIzMi5qcyc7XG5pbXBvcnQgeyBhIGFzIGFkZEV2ZW50TGlzdGVuZXIsIGIgYXMgcmVtb3ZlRXZlbnRMaXN0ZW5lciwgciBhcyByYWYsIHAgYXMgcG9pbnRlckNvb3JkLCBjIGFzIGNvbXBvbmVudE9uUmVhZHkgfSBmcm9tICcuL2hlbHBlcnMtM2IzOTBlNDguanMnO1xuaW1wb3J0ICcuL2luZGV4LWM0YjExNjc2LmpzJztcblxuY29uc3QgY2xvbmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcmVsb2NhdGVJbnB1dCA9IChjb21wb25lbnRFbCwgaW5wdXRFbCwgc2hvdWxkUmVsb2NhdGUsIGlucHV0UmVsYXRpdmVZID0gMCkgPT4ge1xuICBpZiAoY2xvbmVNYXAuaGFzKGNvbXBvbmVudEVsKSA9PT0gc2hvdWxkUmVsb2NhdGUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNob3VsZFJlbG9jYXRlKSB7XG4gICAgYWRkQ2xvbmUoY29tcG9uZW50RWwsIGlucHV0RWwsIGlucHV0UmVsYXRpdmVZKTtcbiAgfVxuICBlbHNlIHtcbiAgICByZW1vdmVDbG9uZShjb21wb25lbnRFbCwgaW5wdXRFbCk7XG4gIH1cbn07XG5jb25zdCBpc0ZvY3VzZWQgPSAoaW5wdXQpID0+IHtcbiAgcmV0dXJuIGlucHV0ID09PSBpbnB1dC5nZXRSb290Tm9kZSgpLmFjdGl2ZUVsZW1lbnQ7XG59O1xuY29uc3QgYWRkQ2xvbmUgPSAoY29tcG9uZW50RWwsIGlucHV0RWwsIGlucHV0UmVsYXRpdmVZKSA9PiB7XG4gIC8vIHRoaXMgYWxsb3dzIGZvciB0aGUgYWN0dWFsIGlucHV0IHRvIHJlY2VpdmUgdGhlIGZvY3VzIGZyb21cbiAgLy8gdGhlIHVzZXIncyB0b3VjaCBldmVudCwgYnV0IGJlZm9yZSBpdCByZWNlaXZlcyBmb2N1cywgaXRcbiAgLy8gbW92ZXMgdGhlIGFjdHVhbCBpbnB1dCB0byBhIGxvY2F0aW9uIHRoYXQgd2lsbCBub3Qgc2NyZXdcbiAgLy8gdXAgdGhlIGFwcCdzIGxheW91dCwgYW5kIGRvZXMgbm90IGFsbG93IHRoZSBuYXRpdmUgYnJvd3NlclxuICAvLyB0byBhdHRlbXB0IHRvIHNjcm9sbCB0aGUgaW5wdXQgaW50byBwbGFjZSAobWVzc2luZyB1cCBoZWFkZXJzL2Zvb3RlcnMpXG4gIC8vIHRoZSBjbG9uZWQgaW5wdXQgZmlsbHMgdGhlIGFyZWEgb2Ygd2hlcmUgbmF0aXZlIGlucHV0IHNob3VsZCBiZVxuICAvLyB3aGlsZSB0aGUgbmF0aXZlIGlucHV0IGZha2VzIG91dCB0aGUgYnJvd3NlciBieSByZWxvY2F0aW5nIGl0c2VsZlxuICAvLyBiZWZvcmUgaXQgcmVjZWl2ZXMgdGhlIGFjdHVhbCBmb2N1cyBldmVudFxuICAvLyBXZSBoaWRlIHRoZSBmb2N1c2VkIGlucHV0ICh3aXRoIHRoZSB2aXNpYmxlIGNhcmV0KSBpbnZpc2libGUgYnkgbWFraW5nIGl0IHNjYWxlKDApLFxuICBjb25zdCBwYXJlbnRFbCA9IGlucHV0RWwucGFyZW50Tm9kZTtcbiAgLy8gRE9NIFdSSVRFU1xuICBjb25zdCBjbG9uZWRFbCA9IGlucHV0RWwuY2xvbmVOb2RlKGZhbHNlKTtcbiAgY2xvbmVkRWwuY2xhc3NMaXN0LmFkZCgnY2xvbmVkLWlucHV0Jyk7XG4gIGNsb25lZEVsLnRhYkluZGV4ID0gLTE7XG4gIHBhcmVudEVsLmFwcGVuZENoaWxkKGNsb25lZEVsKTtcbiAgY2xvbmVNYXAuc2V0KGNvbXBvbmVudEVsLCBjbG9uZWRFbCk7XG4gIGNvbnN0IGRvYyA9IGNvbXBvbmVudEVsLm93bmVyRG9jdW1lbnQ7XG4gIGNvbnN0IHR4ID0gZG9jLmRpciA9PT0gJ3J0bCcgPyA5OTk5IDogLTk5OTk7XG4gIGNvbXBvbmVudEVsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG4gIGlucHV0RWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKCR7dHh9cHgsJHtpbnB1dFJlbGF0aXZlWX1weCwwKSBzY2FsZSgwKWA7XG59O1xuY29uc3QgcmVtb3ZlQ2xvbmUgPSAoY29tcG9uZW50RWwsIGlucHV0RWwpID0+IHtcbiAgY29uc3QgY2xvbmUgPSBjbG9uZU1hcC5nZXQoY29tcG9uZW50RWwpO1xuICBpZiAoY2xvbmUpIHtcbiAgICBjbG9uZU1hcC5kZWxldGUoY29tcG9uZW50RWwpO1xuICAgIGNsb25lLnJlbW92ZSgpO1xuICB9XG4gIGNvbXBvbmVudEVsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnJztcbiAgaW5wdXRFbC5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbn07XG5cbmNvbnN0IGVuYWJsZUhpZGVDYXJldE9uU2Nyb2xsID0gKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBzY3JvbGxFbCkgPT4ge1xuICBpZiAoIXNjcm9sbEVsIHx8ICFpbnB1dEVsKSB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHJldHVybjtcbiAgICB9O1xuICB9XG4gIGNvbnN0IHNjcm9sbEhpZGVDYXJldCA9IChzaG91bGRIaWRlQ2FyZXQpID0+IHtcbiAgICBpZiAoaXNGb2N1c2VkKGlucHV0RWwpKSB7XG4gICAgICByZWxvY2F0ZUlucHV0KGNvbXBvbmVudEVsLCBpbnB1dEVsLCBzaG91bGRIaWRlQ2FyZXQpO1xuICAgIH1cbiAgfTtcbiAgY29uc3Qgb25CbHVyID0gKCkgPT4gcmVsb2NhdGVJbnB1dChjb21wb25lbnRFbCwgaW5wdXRFbCwgZmFsc2UpO1xuICBjb25zdCBoaWRlQ2FyZXQgPSAoKSA9PiBzY3JvbGxIaWRlQ2FyZXQodHJ1ZSk7XG4gIGNvbnN0IHNob3dDYXJldCA9ICgpID0+IHNjcm9sbEhpZGVDYXJldChmYWxzZSk7XG4gIGFkZEV2ZW50TGlzdGVuZXIoc2Nyb2xsRWwsICdpb25TY3JvbGxTdGFydCcsIGhpZGVDYXJldCk7XG4gIGFkZEV2ZW50TGlzdGVuZXIoc2Nyb2xsRWwsICdpb25TY3JvbGxFbmQnLCBzaG93Q2FyZXQpO1xuICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBvbkJsdXIpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoc2Nyb2xsRWwsICdpb25TY3JvbGxTdGFydCcsIGhpZGVDYXJldCk7XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihzY3JvbGxFbCwgJ2lvblNjcm9sbEVuZCcsIHNob3dDYXJldCk7XG4gICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdpb25CbHVyJywgb25CbHVyKTtcbiAgfTtcbn07XG5cbmNvbnN0IFNLSVBfU0VMRUNUT1IgPSAnaW5wdXQsIHRleHRhcmVhLCBbbm8tYmx1cl0sIFtjb250ZW50ZWRpdGFibGVdJztcbmNvbnN0IGVuYWJsZUlucHV0Qmx1cnJpbmcgPSAoKSA9PiB7XG4gIGxldCBmb2N1c2VkID0gdHJ1ZTtcbiAgbGV0IGRpZFNjcm9sbCA9IGZhbHNlO1xuICBjb25zdCBkb2MgPSBkb2N1bWVudDtcbiAgY29uc3Qgb25TY3JvbGwgPSAoKSA9PiB7XG4gICAgZGlkU2Nyb2xsID0gdHJ1ZTtcbiAgfTtcbiAgY29uc3Qgb25Gb2N1c2luID0gKCkgPT4ge1xuICAgIGZvY3VzZWQgPSB0cnVlO1xuICB9O1xuICBjb25zdCBvblRvdWNoZW5kID0gKGV2KSA9PiB7XG4gICAgLy8gaWYgYXBwIGRpZCBzY3JvbGwgcmV0dXJuIGVhcmx5XG4gICAgaWYgKGRpZFNjcm9sbCkge1xuICAgICAgZGlkU2Nyb2xsID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGFjdGl2ZSA9IGRvYy5hY3RpdmVFbGVtZW50O1xuICAgIGlmICghYWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIG9ubHkgYmx1ciBpZiB0aGUgYWN0aXZlIGVsZW1lbnQgaXMgYSB0ZXh0LWlucHV0IG9yIGEgdGV4dGFyZWFcbiAgICBpZiAoYWN0aXZlLm1hdGNoZXMoU0tJUF9TRUxFQ1RPUikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gaWYgdGhlIHNlbGVjdGVkIHRhcmdldCBpcyB0aGUgYWN0aXZlIGVsZW1lbnQsIGRvIG5vdCBibHVyXG4gICAgY29uc3QgdGFwcGVkID0gZXYudGFyZ2V0O1xuICAgIGlmICh0YXBwZWQgPT09IGFjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGFwcGVkLm1hdGNoZXMoU0tJUF9TRUxFQ1RPUikgfHwgdGFwcGVkLmNsb3Nlc3QoU0tJUF9TRUxFQ1RPUikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9jdXNlZCA9IGZhbHNlO1xuICAgIC8vIFRPRE86IGZpbmQgYSBiZXR0ZXIgd2F5LCB3aHkgNTBtcz9cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICghZm9jdXNlZCkge1xuICAgICAgICBhY3RpdmUuYmx1cigpO1xuICAgICAgfVxuICAgIH0sIDUwKTtcbiAgfTtcbiAgYWRkRXZlbnRMaXN0ZW5lcihkb2MsICdpb25TY3JvbGxTdGFydCcsIG9uU2Nyb2xsKTtcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBvbkZvY3VzaW4sIHRydWUpO1xuICBkb2MuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblRvdWNoZW5kLCBmYWxzZSk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihkb2MsICdpb25TY3JvbGxTdGFydCcsIG9uU2Nyb2xsLCB0cnVlKTtcbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIG9uRm9jdXNpbiwgdHJ1ZSk7XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25Ub3VjaGVuZCwgZmFsc2UpO1xuICB9O1xufTtcblxuY29uc3QgU0NST0xMX0FTU0lTVF9TUEVFRCA9IDAuMztcbmNvbnN0IGdldFNjcm9sbERhdGEgPSAoY29tcG9uZW50RWwsIGNvbnRlbnRFbCwga2V5Ym9hcmRIZWlnaHQpID0+IHtcbiAgdmFyIF9hO1xuICBjb25zdCBpdGVtRWwgPSAoX2EgPSBjb21wb25lbnRFbC5jbG9zZXN0KCdpb24taXRlbSxbaW9uLWl0ZW1dJykpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGNvbXBvbmVudEVsO1xuICByZXR1cm4gY2FsY1Njcm9sbERhdGEoaXRlbUVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBjb250ZW50RWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGtleWJvYXJkSGVpZ2h0LCBjb21wb25lbnRFbC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmlubmVySGVpZ2h0KTtcbn07XG5jb25zdCBjYWxjU2Nyb2xsRGF0YSA9IChpbnB1dFJlY3QsIGNvbnRlbnRSZWN0LCBrZXlib2FyZEhlaWdodCwgcGxhdGZvcm1IZWlnaHQpID0+IHtcbiAgLy8gY29tcHV0ZSBpbnB1dCdzIFkgdmFsdWVzIHJlbGF0aXZlIHRvIHRoZSBib2R5XG4gIGNvbnN0IGlucHV0VG9wID0gaW5wdXRSZWN0LnRvcDtcbiAgY29uc3QgaW5wdXRCb3R0b20gPSBpbnB1dFJlY3QuYm90dG9tO1xuICAvLyBjb21wdXRlIHZpc2libGUgYXJlYVxuICBjb25zdCB2aXNpYmxlQXJlYVRvcCA9IGNvbnRlbnRSZWN0LnRvcDtcbiAgY29uc3QgdmlzaWJsZUFyZWFCb3R0b20gPSBNYXRoLm1pbihjb250ZW50UmVjdC5ib3R0b20sIHBsYXRmb3JtSGVpZ2h0IC0ga2V5Ym9hcmRIZWlnaHQpO1xuICAvLyBjb21wdXRlIHNhZmUgYXJlYVxuICBjb25zdCBzYWZlQXJlYVRvcCA9IHZpc2libGVBcmVhVG9wICsgMTU7XG4gIGNvbnN0IHNhZmVBcmVhQm90dG9tID0gdmlzaWJsZUFyZWFCb3R0b20gKiAwLjc1O1xuICAvLyBmaWd1cmUgb3V0IGlmIGVhY2ggZWRnZSBvZiB0aGUgaW5wdXQgaXMgd2l0aGluIHRoZSBzYWZlIGFyZWFcbiAgY29uc3QgZGlzdGFuY2VUb0JvdHRvbSA9IHNhZmVBcmVhQm90dG9tIC0gaW5wdXRCb3R0b207XG4gIGNvbnN0IGRpc3RhbmNlVG9Ub3AgPSBzYWZlQXJlYVRvcCAtIGlucHV0VG9wO1xuICAvLyBkZXNpcmVkU2Nyb2xsQW1vdW50IGlzIHRoZSBuZWdhdGVkIGRpc3RhbmNlIHRvIHRoZSBzYWZlIGFyZWEgYWNjb3JkaW5nIHRvIG91ciBjYWxjdWxhdGlvbnMuXG4gIGNvbnN0IGRlc2lyZWRTY3JvbGxBbW91bnQgPSBNYXRoLnJvdW5kKGRpc3RhbmNlVG9Cb3R0b20gPCAwID8gLWRpc3RhbmNlVG9Cb3R0b20gOiBkaXN0YW5jZVRvVG9wID4gMCA/IC1kaXN0YW5jZVRvVG9wIDogMCk7XG4gIC8vIG91ciBjYWxjdWxhdGlvbnMgbWFrZSBzb21lIGFzc3VtcHRpb25zIHRoYXQgYXJlbid0IGFsd2F5cyB0cnVlLCBsaWtlIHRoZSBrZXlib2FyZCBiZWluZyBjbG9zZWQgd2hlbiBhbiBpbnB1dFxuICAvLyBnZXRzIGZvY3VzLCBzbyBtYWtlIHN1cmUgd2UgZG9uJ3Qgc2Nyb2xsIHRoZSBpbnB1dCBhYm92ZSB0aGUgdmlzaWJsZSBhcmVhXG4gIGNvbnN0IHNjcm9sbEFtb3VudCA9IE1hdGgubWluKGRlc2lyZWRTY3JvbGxBbW91bnQsIGlucHV0VG9wIC0gdmlzaWJsZUFyZWFUb3ApO1xuICBjb25zdCBkaXN0YW5jZSA9IE1hdGguYWJzKHNjcm9sbEFtb3VudCk7XG4gIGNvbnN0IGR1cmF0aW9uID0gZGlzdGFuY2UgLyBTQ1JPTExfQVNTSVNUX1NQRUVEO1xuICBjb25zdCBzY3JvbGxEdXJhdGlvbiA9IE1hdGgubWluKDQwMCwgTWF0aC5tYXgoMTUwLCBkdXJhdGlvbikpO1xuICByZXR1cm4ge1xuICAgIHNjcm9sbEFtb3VudCxcbiAgICBzY3JvbGxEdXJhdGlvbixcbiAgICBzY3JvbGxQYWRkaW5nOiBrZXlib2FyZEhlaWdodCxcbiAgICBpbnB1dFNhZmVZOiAtKGlucHV0VG9wIC0gc2FmZUFyZWFUb3ApICsgNCxcbiAgfTtcbn07XG5cbmNvbnN0IGVuYWJsZVNjcm9sbEFzc2lzdCA9IChjb21wb25lbnRFbCwgaW5wdXRFbCwgY29udGVudEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQpID0+IHtcbiAgbGV0IGNvb3JkO1xuICBjb25zdCB0b3VjaFN0YXJ0ID0gKGV2KSA9PiB7XG4gICAgY29vcmQgPSBwb2ludGVyQ29vcmQoZXYpO1xuICB9O1xuICBjb25zdCB0b3VjaEVuZCA9IChldikgPT4ge1xuICAgIC8vIGlucHV0IGNvdmVyIHRvdWNoZW5kL21vdXNldXBcbiAgICBpZiAoIWNvb3JkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGdldCB3aGVyZSB0aGUgdG91Y2hlbmQvbW91c2V1cCBlbmRlZFxuICAgIGNvbnN0IGVuZENvb3JkID0gcG9pbnRlckNvb3JkKGV2KTtcbiAgICAvLyBmb2N1cyB0aGlzIGlucHV0IGlmIHRoZSBwb2ludGVyIGhhc24ndCBtb3ZlZCBYWCBwaXhlbHNcbiAgICAvLyBhbmQgdGhlIGlucHV0IGRvZXNuJ3QgYWxyZWFkeSBoYXZlIGZvY3VzXG4gICAgaWYgKCFoYXNQb2ludGVyTW92ZWQoNiwgY29vcmQsIGVuZENvb3JkKSAmJiAhaXNGb2N1c2VkKGlucHV0RWwpKSB7XG4gICAgICAvLyBiZWdpbiB0aGUgaW5wdXQgZm9jdXMgcHJvY2Vzc1xuICAgICAganNTZXRGb2N1cyhjb21wb25lbnRFbCwgaW5wdXRFbCwgY29udGVudEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQpO1xuICAgIH1cbiAgfTtcbiAgY29tcG9uZW50RWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRvdWNoU3RhcnQsIHsgY2FwdHVyZTogdHJ1ZSwgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgY29tcG9uZW50RWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0b3VjaEVuZCwgdHJ1ZSk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgY29tcG9uZW50RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRvdWNoU3RhcnQsIHRydWUpO1xuICAgIGNvbXBvbmVudEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdG91Y2hFbmQsIHRydWUpO1xuICB9O1xufTtcbmNvbnN0IGpzU2V0Rm9jdXMgPSBhc3luYyAoY29tcG9uZW50RWwsIGlucHV0RWwsIGNvbnRlbnRFbCwgZm9vdGVyRWwsIGtleWJvYXJkSGVpZ2h0KSA9PiB7XG4gIGlmICghY29udGVudEVsICYmICFmb290ZXJFbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBzY3JvbGxEYXRhID0gZ2V0U2Nyb2xsRGF0YShjb21wb25lbnRFbCwgKGNvbnRlbnRFbCB8fCBmb290ZXJFbCksIGtleWJvYXJkSGVpZ2h0KTtcbiAgaWYgKGNvbnRlbnRFbCAmJiBNYXRoLmFicyhzY3JvbGxEYXRhLnNjcm9sbEFtb3VudCkgPCA0KSB7XG4gICAgLy8gdGhlIHRleHQgaW5wdXQgaXMgaW4gYSBzYWZlIHBvc2l0aW9uIHRoYXQgZG9lc24ndFxuICAgIC8vIHJlcXVpcmUgaXQgdG8gYmUgc2Nyb2xsZWQgaW50byB2aWV3LCBqdXN0IHNldCBmb2N1cyBub3dcbiAgICBpbnB1dEVsLmZvY3VzKCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIHRlbXBvcmFyaWx5IG1vdmUgdGhlIGZvY3VzIHRvIHRoZSBmb2N1cyBob2xkZXIgc28gdGhlIGJyb3dzZXJcbiAgLy8gZG9lc24ndCBmcmVhayBvdXQgd2hpbGUgaXQncyB0cnlpbmcgdG8gZ2V0IHRoZSBpbnB1dCBpbiBwbGFjZVxuICAvLyBhdCB0aGlzIHBvaW50IHRoZSBuYXRpdmUgdGV4dCBpbnB1dCBzdGlsbCBkb2VzIG5vdCBoYXZlIGZvY3VzXG4gIHJlbG9jYXRlSW5wdXQoY29tcG9uZW50RWwsIGlucHV0RWwsIHRydWUsIHNjcm9sbERhdGEuaW5wdXRTYWZlWSk7XG4gIGlucHV0RWwuZm9jdXMoKTtcbiAgLyoqXG4gICAqIFJlbG9jYXRpbmcvRm9jdXNpbmcgaW5wdXQgY2F1c2VzIHRoZVxuICAgKiBjbGljayBldmVudCB0byBiZSBjYW5jZWxsZWQsIHNvXG4gICAqIG1hbnVhbGx5IGZpcmUgb25lIGhlcmUuXG4gICAqL1xuICByYWYoKCkgPT4gY29tcG9uZW50RWwuY2xpY2soKSk7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxldCBzY3JvbGxDb250ZW50VGltZW91dDtcbiAgICBjb25zdCBzY3JvbGxDb250ZW50ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gY2xlYW4gdXAgbGlzdGVuZXJzIGFuZCB0aW1lb3V0c1xuICAgICAgaWYgKHNjcm9sbENvbnRlbnRUaW1lb3V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNjcm9sbENvbnRlbnRUaW1lb3V0KTtcbiAgICAgIH1cbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lvbktleWJvYXJkRGlkU2hvdycsIHNjcm9sbENvbnRlbnQpO1xuICAgICAgLy8gc2Nyb2xsIHRoZSBpbnB1dCBpbnRvIHBsYWNlXG4gICAgICBpZiAoY29udGVudEVsKSB7XG4gICAgICAgIGF3YWl0IHNjcm9sbEJ5UG9pbnQoY29udGVudEVsLCAwLCBzY3JvbGxEYXRhLnNjcm9sbEFtb3VudCwgc2Nyb2xsRGF0YS5zY3JvbGxEdXJhdGlvbik7XG4gICAgICB9XG4gICAgICAvLyB0aGUgc2Nyb2xsIHZpZXcgaXMgaW4gdGhlIGNvcnJlY3QgcG9zaXRpb24gbm93XG4gICAgICAvLyBnaXZlIHRoZSBuYXRpdmUgdGV4dCBpbnB1dCBmb2N1c1xuICAgICAgcmVsb2NhdGVJbnB1dChjb21wb25lbnRFbCwgaW5wdXRFbCwgZmFsc2UsIHNjcm9sbERhdGEuaW5wdXRTYWZlWSk7XG4gICAgICAvLyBlbnN1cmUgdGhpcyBpcyB0aGUgZm9jdXNlZCBpbnB1dFxuICAgICAgaW5wdXRFbC5mb2N1cygpO1xuICAgIH07XG4gICAgY29uc3QgZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lvbktleWJvYXJkRGlkU2hvdycsIGRvdWJsZUtleWJvYXJkRXZlbnRMaXN0ZW5lcik7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93Jywgc2Nyb2xsQ29udGVudCk7XG4gICAgfTtcbiAgICBpZiAoY29udGVudEVsKSB7XG4gICAgICBjb25zdCBzY3JvbGxFbCA9IGF3YWl0IGdldFNjcm9sbEVsZW1lbnQoY29udGVudEVsKTtcbiAgICAgIC8qKlxuICAgICAgICogc2Nyb2xsRGF0YSB3aWxsIG9ubHkgY29uc2lkZXIgdGhlIGFtb3VudCB3ZSBuZWVkXG4gICAgICAgKiB0byBzY3JvbGwgaW4gb3JkZXIgdG8gcHJvcGVybHkgYnJpbmcgdGhlIGlucHV0XG4gICAgICAgKiBpbnRvIHZpZXcuIEl0IHdpbGwgbm90IGNvbnNpZGVyIHRoZSBhbW91bnRcbiAgICAgICAqIHdlIGNhbiBzY3JvbGwgaW4gdGhlIGNvbnRlbnQgZWxlbWVudC5cbiAgICAgICAqIEFzIGEgcmVzdWx0LCBzY3JvbGxEYXRhIG1heSByZXF1ZXN0IGEgZ3JlYXRlclxuICAgICAgICogc2Nyb2xsIHBvc2l0aW9uIHRoYW4gaXMgY3VycmVudGx5IGF2YWlsYWJsZVxuICAgICAgICogaW4gdGhlIERPTS4gSWYgdGhpcyBpcyB0aGUgY2FzZSwgd2UgbmVlZCB0b1xuICAgICAgICogd2FpdCBmb3IgdGhlIHdlYnZpZXcgdG8gcmVzaXplL3RoZSBrZXlib2FyZFxuICAgICAgICogdG8gc2hvdyBpbiBvcmRlciBmb3IgYWRkaXRpb25hbCBzY3JvbGxcbiAgICAgICAqIGJhbmR3aWR0aCB0byBiZWNvbWUgYXZhaWxhYmxlLlxuICAgICAgICovXG4gICAgICBjb25zdCB0b3RhbFNjcm9sbEFtb3VudCA9IHNjcm9sbEVsLnNjcm9sbEhlaWdodCAtIHNjcm9sbEVsLmNsaWVudEhlaWdodDtcbiAgICAgIGlmIChzY3JvbGxEYXRhLnNjcm9sbEFtb3VudCA+IHRvdGFsU2Nyb2xsQW1vdW50IC0gc2Nyb2xsRWwuc2Nyb2xsVG9wKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPbiBpT1MgZGV2aWNlcywgdGhlIHN5c3RlbSB3aWxsIHNob3cgYSBcIlBhc3N3b3Jkc1wiIGJhciBhYm92ZSB0aGUga2V5Ym9hcmRcbiAgICAgICAgICogYWZ0ZXIgdGhlIGluaXRpYWwga2V5Ym9hcmQgaXMgc2hvd24uIFRoaXMgcHJldmVudHMgdGhlIHdlYnZpZXcgZnJvbSByZXNpemluZ1xuICAgICAgICAgKiB1bnRpbCB0aGUgXCJQYXNzd29yZHNcIiBiYXIgaXMgc2hvd24sIHNvIHdlIG5lZWQgdG8gd2FpdCBmb3IgdGhhdCB0byBoYXBwZW4gZmlyc3QuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoaW5wdXRFbC50eXBlID09PSAncGFzc3dvcmQnKSB7XG4gICAgICAgICAgLy8gQWRkIDUwcHggdG8gYWNjb3VudCBmb3IgdGhlIFwiUGFzc3dvcmRzXCIgYmFyXG4gICAgICAgICAgc2Nyb2xsRGF0YS5zY3JvbGxBbW91bnQgKz0gNTA7XG4gICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2lvbktleWJvYXJkRGlkU2hvdycsIGRvdWJsZUtleWJvYXJkRXZlbnRMaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2lvbktleWJvYXJkRGlkU2hvdycsIHNjcm9sbENvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIHNob3VsZCBvbmx5IGZpcmUgaW4gMiBpbnN0YW5jZXM6XG4gICAgICAgICAqIDEuIFRoZSBhcHAgaXMgdmVyeSBzbG93LlxuICAgICAgICAgKiAyLiBUaGUgYXBwIGlzIHJ1bm5pbmcgaW4gYSBicm93c2VyIG9uIGFuIG9sZCBPU1xuICAgICAgICAgKiB0aGF0IGRvZXMgbm90IHN1cHBvcnQgSW9uaWMgS2V5Ym9hcmQgRXZlbnRzXG4gICAgICAgICAqL1xuICAgICAgICBzY3JvbGxDb250ZW50VGltZW91dCA9IHNldFRpbWVvdXQoc2Nyb2xsQ29udGVudCwgMTAwMCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgc2Nyb2xsQ29udGVudCgpO1xuICB9XG59O1xuY29uc3QgaGFzUG9pbnRlck1vdmVkID0gKHRocmVzaG9sZCwgc3RhcnRDb29yZCwgZW5kQ29vcmQpID0+IHtcbiAgaWYgKHN0YXJ0Q29vcmQgJiYgZW5kQ29vcmQpIHtcbiAgICBjb25zdCBkZWx0YVggPSBzdGFydENvb3JkLnggLSBlbmRDb29yZC54O1xuICAgIGNvbnN0IGRlbHRhWSA9IHN0YXJ0Q29vcmQueSAtIGVuZENvb3JkLnk7XG4gICAgY29uc3QgZGlzdGFuY2UgPSBkZWx0YVggKiBkZWx0YVggKyBkZWx0YVkgKiBkZWx0YVk7XG4gICAgcmV0dXJuIGRpc3RhbmNlID4gdGhyZXNob2xkICogdGhyZXNob2xkO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmNvbnN0IFBBRERJTkdfVElNRVJfS0VZID0gJyRpb25QYWRkaW5nVGltZXInO1xuY29uc3QgZW5hYmxlU2Nyb2xsUGFkZGluZyA9IChrZXlib2FyZEhlaWdodCkgPT4ge1xuICBjb25zdCBkb2MgPSBkb2N1bWVudDtcbiAgY29uc3Qgb25Gb2N1c2luID0gKGV2KSA9PiB7XG4gICAgc2V0U2Nyb2xsUGFkZGluZyhldi50YXJnZXQsIGtleWJvYXJkSGVpZ2h0KTtcbiAgfTtcbiAgY29uc3Qgb25Gb2N1c291dCA9IChldikgPT4ge1xuICAgIHNldFNjcm9sbFBhZGRpbmcoZXYudGFyZ2V0LCAwKTtcbiAgfTtcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBvbkZvY3VzaW4pO1xuICBkb2MuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBvbkZvY3Vzb3V0KTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIG9uRm9jdXNpbik7XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0Jywgb25Gb2N1c291dCk7XG4gIH07XG59O1xuY29uc3Qgc2V0U2Nyb2xsUGFkZGluZyA9IChpbnB1dCwga2V5Ym9hcmRIZWlnaHQpID0+IHtcbiAgdmFyIF9hLCBfYjtcbiAgaWYgKGlucHV0LnRhZ05hbWUgIT09ICdJTlBVVCcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGlucHV0LnBhcmVudEVsZW1lbnQgJiYgaW5wdXQucGFyZW50RWxlbWVudC50YWdOYW1lID09PSAnSU9OLUlOUFVUJykge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoKChfYiA9IChfYSA9IGlucHV0LnBhcmVudEVsZW1lbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wYXJlbnRFbGVtZW50KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudGFnTmFtZSkgPT09ICdJT04tU0VBUkNIQkFSJykge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBlbCA9IGZpbmRDbG9zZXN0SW9uQ29udGVudChpbnB1dCk7XG4gIGlmIChlbCA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB0aW1lciA9IGVsW1BBRERJTkdfVElNRVJfS0VZXTtcbiAgaWYgKHRpbWVyKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgfVxuICBpZiAoa2V5Ym9hcmRIZWlnaHQgPiAwKSB7XG4gICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0ta2V5Ym9hcmQtb2Zmc2V0JywgYCR7a2V5Ym9hcmRIZWlnaHR9cHhgKTtcbiAgfVxuICBlbHNlIHtcbiAgICBlbFtQQURESU5HX1RJTUVSX0tFWV0gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KCctLWtleWJvYXJkLW9mZnNldCcsICcwcHgnKTtcbiAgICB9LCAxMjApO1xuICB9XG59O1xuXG5jb25zdCBJTlBVVF9CTFVSUklORyA9IHRydWU7XG5jb25zdCBTQ1JPTExfUEFERElORyA9IHRydWU7XG5jb25zdCBzdGFydElucHV0U2hpbXMgPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGRvYyA9IGRvY3VtZW50O1xuICBjb25zdCBrZXlib2FyZEhlaWdodCA9IGNvbmZpZy5nZXROdW1iZXIoJ2tleWJvYXJkSGVpZ2h0JywgMjkwKTtcbiAgY29uc3Qgc2Nyb2xsQXNzaXN0ID0gY29uZmlnLmdldEJvb2xlYW4oJ3Njcm9sbEFzc2lzdCcsIHRydWUpO1xuICBjb25zdCBoaWRlQ2FyZXQgPSBjb25maWcuZ2V0Qm9vbGVhbignaGlkZUNhcmV0T25TY3JvbGwnLCB0cnVlKTtcbiAgY29uc3QgaW5wdXRCbHVycmluZyA9IGNvbmZpZy5nZXRCb29sZWFuKCdpbnB1dEJsdXJyaW5nJywgdHJ1ZSk7XG4gIGNvbnN0IHNjcm9sbFBhZGRpbmcgPSBjb25maWcuZ2V0Qm9vbGVhbignc2Nyb2xsUGFkZGluZycsIHRydWUpO1xuICBjb25zdCBpbnB1dHMgPSBBcnJheS5mcm9tKGRvYy5xdWVyeVNlbGVjdG9yQWxsKCdpb24taW5wdXQsIGlvbi10ZXh0YXJlYScpKTtcbiAgY29uc3QgaGlkZUNhcmV0TWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgY29uc3Qgc2Nyb2xsQXNzaXN0TWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgY29uc3QgcmVnaXN0ZXJJbnB1dCA9IGFzeW5jIChjb21wb25lbnRFbCkgPT4ge1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBjb21wb25lbnRPblJlYWR5KGNvbXBvbmVudEVsLCByZXNvbHZlKSk7XG4gICAgY29uc3QgaW5wdXRSb290ID0gY29tcG9uZW50RWwuc2hhZG93Um9vdCB8fCBjb21wb25lbnRFbDtcbiAgICBjb25zdCBpbnB1dEVsID0gaW5wdXRSb290LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykgfHwgaW5wdXRSb290LnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyk7XG4gICAgY29uc3Qgc2Nyb2xsRWwgPSBmaW5kQ2xvc2VzdElvbkNvbnRlbnQoY29tcG9uZW50RWwpO1xuICAgIGNvbnN0IGZvb3RlckVsID0gIXNjcm9sbEVsID8gY29tcG9uZW50RWwuY2xvc2VzdCgnaW9uLWZvb3RlcicpIDogbnVsbDtcbiAgICBpZiAoIWlucHV0RWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCEhc2Nyb2xsRWwgJiYgaGlkZUNhcmV0ICYmICFoaWRlQ2FyZXRNYXAuaGFzKGNvbXBvbmVudEVsKSkge1xuICAgICAgY29uc3Qgcm1GbiA9IGVuYWJsZUhpZGVDYXJldE9uU2Nyb2xsKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBzY3JvbGxFbCk7XG4gICAgICBoaWRlQ2FyZXRNYXAuc2V0KGNvbXBvbmVudEVsLCBybUZuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogZGF0ZS9kYXRldGltZS1sb2NhbGUgaW5wdXRzIG9uIG1vYmlsZSBkZXZpY2VzIHNob3cgZGF0ZSBwaWNrZXJcbiAgICAgKiBvdmVybGF5cyBpbnN0ZWFkIG9mIGtleWJvYXJkcy4gQXMgYSByZXN1bHQsIHNjcm9sbCBhc3Npc3QgaXNcbiAgICAgKiBub3QgbmVlZGVkLiBUaGlzIGFsc28gd29ya3MgYXJvdW5kIGEgYnVnIGluIGlPUyA8MTYgd2hlcmVcbiAgICAgKiBzY3JvbGwgYXNzaXN0IGNhdXNlcyB0aGUgYnJvd3NlciB0byBsb2NrIHVwLiBTZWUgRlctMTk5Ny5cbiAgICAgKi9cbiAgICBjb25zdCBpc0RhdGVJbnB1dCA9IGlucHV0RWwudHlwZSA9PT0gJ2RhdGUnIHx8IGlucHV0RWwudHlwZSA9PT0gJ2RhdGV0aW1lLWxvY2FsJztcbiAgICBpZiAoIWlzRGF0ZUlucHV0ICYmXG4gICAgICAoISFzY3JvbGxFbCB8fCAhIWZvb3RlckVsKSAmJlxuICAgICAgc2Nyb2xsQXNzaXN0ICYmXG4gICAgICAhc2Nyb2xsQXNzaXN0TWFwLmhhcyhjb21wb25lbnRFbCkpIHtcbiAgICAgIGNvbnN0IHJtRm4gPSBlbmFibGVTY3JvbGxBc3Npc3QoY29tcG9uZW50RWwsIGlucHV0RWwsIHNjcm9sbEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQpO1xuICAgICAgc2Nyb2xsQXNzaXN0TWFwLnNldChjb21wb25lbnRFbCwgcm1Gbik7XG4gICAgfVxuICB9O1xuICBjb25zdCB1bnJlZ2lzdGVySW5wdXQgPSAoY29tcG9uZW50RWwpID0+IHtcbiAgICBpZiAoaGlkZUNhcmV0KSB7XG4gICAgICBjb25zdCBmbiA9IGhpZGVDYXJldE1hcC5nZXQoY29tcG9uZW50RWwpO1xuICAgICAgaWYgKGZuKSB7XG4gICAgICAgIGZuKCk7XG4gICAgICB9XG4gICAgICBoaWRlQ2FyZXRNYXAuZGVsZXRlKGNvbXBvbmVudEVsKTtcbiAgICB9XG4gICAgaWYgKHNjcm9sbEFzc2lzdCkge1xuICAgICAgY29uc3QgZm4gPSBzY3JvbGxBc3Npc3RNYXAuZ2V0KGNvbXBvbmVudEVsKTtcbiAgICAgIGlmIChmbikge1xuICAgICAgICBmbigpO1xuICAgICAgfVxuICAgICAgc2Nyb2xsQXNzaXN0TWFwLmRlbGV0ZShjb21wb25lbnRFbCk7XG4gICAgfVxuICB9O1xuICBpZiAoaW5wdXRCbHVycmluZyAmJiBJTlBVVF9CTFVSUklORykge1xuICAgIGVuYWJsZUlucHV0Qmx1cnJpbmcoKTtcbiAgfVxuICBpZiAoc2Nyb2xsUGFkZGluZyAmJiBTQ1JPTExfUEFERElORykge1xuICAgIGVuYWJsZVNjcm9sbFBhZGRpbmcoa2V5Ym9hcmRIZWlnaHQpO1xuICB9XG4gIC8vIElucHV0IG1pZ2h0IGJlIGFscmVhZHkgbG9hZGVkIGluIHRoZSBET00gYmVmb3JlIGlvbi1kZXZpY2UtaGFja3MgZGlkLlxuICAvLyBBdCB0aGlzIHBvaW50IHdlIG5lZWQgdG8gbG9vayBmb3IgYWxsIG9mIHRoZSBpbnB1dHMgbm90IHJlZ2lzdGVyZWQgeWV0XG4gIC8vIGFuZCByZWdpc3RlciB0aGVtLlxuICBmb3IgKGNvbnN0IGlucHV0IG9mIGlucHV0cykge1xuICAgIHJlZ2lzdGVySW5wdXQoaW5wdXQpO1xuICB9XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdpb25JbnB1dERpZExvYWQnLCAoKGV2KSA9PiB7XG4gICAgcmVnaXN0ZXJJbnB1dChldi5kZXRhaWwpO1xuICB9KSk7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdpb25JbnB1dERpZFVubG9hZCcsICgoZXYpID0+IHtcbiAgICB1bnJlZ2lzdGVySW5wdXQoZXYuZGV0YWlsKTtcbiAgfSkpO1xufTtcblxuZXhwb3J0IHsgc3RhcnRJbnB1dFNoaW1zIH07XG4iXSwibmFtZXMiOlsiZyIsImdldFNjcm9sbEVsZW1lbnQiLCJjIiwic2Nyb2xsQnlQb2ludCIsImYiLCJmaW5kQ2xvc2VzdElvbkNvbnRlbnQiLCJhIiwiYWRkRXZlbnRMaXN0ZW5lciIsImIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiciIsInJhZiIsInAiLCJwb2ludGVyQ29vcmQiLCJjb21wb25lbnRPblJlYWR5IiwiY2xvbmVNYXAiLCJXZWFrTWFwIiwicmVsb2NhdGVJbnB1dCIsImNvbXBvbmVudEVsIiwiaW5wdXRFbCIsInNob3VsZFJlbG9jYXRlIiwiaW5wdXRSZWxhdGl2ZVkiLCJoYXMiLCJhZGRDbG9uZSIsInJlbW92ZUNsb25lIiwiaXNGb2N1c2VkIiwiaW5wdXQiLCJnZXRSb290Tm9kZSIsImFjdGl2ZUVsZW1lbnQiLCJwYXJlbnRFbCIsInBhcmVudE5vZGUiLCJjbG9uZWRFbCIsImNsb25lTm9kZSIsImNsYXNzTGlzdCIsImFkZCIsInRhYkluZGV4IiwiYXBwZW5kQ2hpbGQiLCJzZXQiLCJkb2MiLCJvd25lckRvY3VtZW50IiwidHgiLCJkaXIiLCJzdHlsZSIsInBvaW50ZXJFdmVudHMiLCJ0cmFuc2Zvcm0iLCJjbG9uZSIsImdldCIsImRlbGV0ZSIsInJlbW92ZSIsImVuYWJsZUhpZGVDYXJldE9uU2Nyb2xsIiwic2Nyb2xsRWwiLCJzY3JvbGxIaWRlQ2FyZXQiLCJzaG91bGRIaWRlQ2FyZXQiLCJvbkJsdXIiLCJoaWRlQ2FyZXQiLCJzaG93Q2FyZXQiLCJTS0lQX1NFTEVDVE9SIiwiZW5hYmxlSW5wdXRCbHVycmluZyIsImZvY3VzZWQiLCJkaWRTY3JvbGwiLCJkb2N1bWVudCIsIm9uU2Nyb2xsIiwib25Gb2N1c2luIiwib25Ub3VjaGVuZCIsImV2IiwiYWN0aXZlIiwibWF0Y2hlcyIsInRhcHBlZCIsInRhcmdldCIsImNsb3Nlc3QiLCJzZXRUaW1lb3V0IiwiYmx1ciIsIlNDUk9MTF9BU1NJU1RfU1BFRUQiLCJnZXRTY3JvbGxEYXRhIiwiY29udGVudEVsIiwia2V5Ym9hcmRIZWlnaHQiLCJfYSIsIml0ZW1FbCIsImNhbGNTY3JvbGxEYXRhIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZGVmYXVsdFZpZXciLCJpbm5lckhlaWdodCIsImlucHV0UmVjdCIsImNvbnRlbnRSZWN0IiwicGxhdGZvcm1IZWlnaHQiLCJpbnB1dFRvcCIsInRvcCIsImlucHV0Qm90dG9tIiwiYm90dG9tIiwidmlzaWJsZUFyZWFUb3AiLCJ2aXNpYmxlQXJlYUJvdHRvbSIsIk1hdGgiLCJtaW4iLCJzYWZlQXJlYVRvcCIsInNhZmVBcmVhQm90dG9tIiwiZGlzdGFuY2VUb0JvdHRvbSIsImRpc3RhbmNlVG9Ub3AiLCJkZXNpcmVkU2Nyb2xsQW1vdW50Iiwicm91bmQiLCJzY3JvbGxBbW91bnQiLCJkaXN0YW5jZSIsImFicyIsImR1cmF0aW9uIiwic2Nyb2xsRHVyYXRpb24iLCJtYXgiLCJzY3JvbGxQYWRkaW5nIiwiaW5wdXRTYWZlWSIsImVuYWJsZVNjcm9sbEFzc2lzdCIsImZvb3RlckVsIiwiY29vcmQiLCJ0b3VjaFN0YXJ0IiwidG91Y2hFbmQiLCJlbmRDb29yZCIsImhhc1BvaW50ZXJNb3ZlZCIsImpzU2V0Rm9jdXMiLCJjYXB0dXJlIiwicGFzc2l2ZSIsInNjcm9sbERhdGEiLCJmb2N1cyIsImNsaWNrIiwid2luZG93Iiwic2Nyb2xsQ29udGVudFRpbWVvdXQiLCJzY3JvbGxDb250ZW50IiwidW5kZWZpbmVkIiwiY2xlYXJUaW1lb3V0IiwiZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyIiwidG90YWxTY3JvbGxBbW91bnQiLCJzY3JvbGxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJzY3JvbGxUb3AiLCJ0eXBlIiwidGhyZXNob2xkIiwic3RhcnRDb29yZCIsImRlbHRhWCIsIngiLCJkZWx0YVkiLCJ5IiwiUEFERElOR19USU1FUl9LRVkiLCJlbmFibGVTY3JvbGxQYWRkaW5nIiwic2V0U2Nyb2xsUGFkZGluZyIsIm9uRm9jdXNvdXQiLCJfYiIsInRhZ05hbWUiLCJwYXJlbnRFbGVtZW50IiwiZWwiLCJ0aW1lciIsInNldFByb3BlcnR5IiwiSU5QVVRfQkxVUlJJTkciLCJTQ1JPTExfUEFERElORyIsInN0YXJ0SW5wdXRTaGltcyIsImNvbmZpZyIsImdldE51bWJlciIsInNjcm9sbEFzc2lzdCIsImdldEJvb2xlYW4iLCJpbnB1dEJsdXJyaW5nIiwiaW5wdXRzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImhpZGVDYXJldE1hcCIsInNjcm9sbEFzc2lzdE1hcCIsInJlZ2lzdGVySW5wdXQiLCJQcm9taXNlIiwicmVzb2x2ZSIsImlucHV0Um9vdCIsInNoYWRvd1Jvb3QiLCJxdWVyeVNlbGVjdG9yIiwicm1GbiIsImlzRGF0ZUlucHV0IiwidW5yZWdpc3RlcklucHV0IiwiZm4iLCJkZXRhaWwiXSwic291cmNlUm9vdCI6IndlYnBhY2s6Ly8vIiwieF9nb29nbGVfaWdub3JlTGlzdCI6WzBdfQ==